# Models

In this directory you will find all the models used to work with in the project.

The next command is an example to generate models + migration files:

```bash
npx sequelize-cli model:generate --name="person" --attributes="name:string"
```

By the way, when using ```"model:generate"``` command you will need to specify some additional options in order to create a generic model, for this, you can use the next command to see them:

```bash
$sequelize-cli model:generate
```

## Schemas:

In this project we are using ```"nz"``` as a preferential case, but you can use public or the one you like.
So if you plan to query something directly in a client sql use ```SELECT * FROM nz.my_table_name;```.

## Tables:

This is the list of the tables generated by the migrations:

| Schema | Table             |
| ------ | ----------------- |
| nz     | category          |
| nz     | company           |
| nz     | customer          |
| nz     | department_worker |
| nz     | department        |
| nz     | kardex            |
| nz     | order_product     |
| nz     | order_worker      |
| nz     | order             |
| nz     | permission        |
| nz     | product_material  |
| nz     | product           |
| nz     | quote_product     |
| nz     | quote             |
| nz     | role_permission   |
| nz     | role              |
| nz     | supplier_product  |
| nz     | supplier          |
| nz     | user_role         |
| nz     | role              |
| nz     | warehouse_product |
| nz     | warehouse         |
| nz     | worker            |

**NOTE**: All the migration were created using ```lowercase``` for the names, but sequelize uses the capitalization style, this means that if a table is called ```order_product``` you can have an instance in the following way: ```models.Order_Product.findOne({...})```.
One thing cool about the ORM is that in the source model you can set it an alias, let's say,

```js
Department.belongsToMany(models.Worker, {
  as: "Workers",
  through: "department_worker",
  foreignKey: "department_id",
  otherKey: "worker_id"
});

Worker.belongsToMany(models.Department, {
  as: "Departments",
  through: "department_worker",
  foreignKey: "worker_id",
  otherKey: "department_id"
});
```
the ```as``` key in the options is the alias pointer, so you can from the source call it using the alias and also from the target.

You can see more examples in the file ```src/db/associations/index.js``` for more examples like this.

You can read more about the models here:

- [Definition](http://docs.sequelizejs.com/manual/tutorial/models-definition.html)
- [Usage](http://docs.sequelizejs.com/manual/tutorial/models-usage.html)
- [Reference API](http://docs.sequelizejs.com/class/lib/model.js~Model.html)
